# –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è 500 –ø–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –ø–æ—Ä–æ–∂–Ω—å–æ–º—É —Ç—ñ–ª—ñ —É tag-space

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ POST-–∑–∞–ø–∏—Ç—ñ –Ω–∞ `/bulk/tag-space/{space_key}` –∑ –ø–æ—Ä–æ–∂–Ω—ñ–º —Ç—ñ–ª–æ–º (`-d ''`) –º–æ–≥–ª–∞ –≤–∏–Ω–∏–∫–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∞ `500 Internal Server Error`.

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

–ï–Ω–¥–ø–æ—ñ–Ω—Ç **–Ω–µ –ø–æ—Ç—Ä–µ–±—É—î —Ç—ñ–ª–∞ –∑–∞–ø–∏—Ç—É** - –≤—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ Query string.

### –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å–ø–æ—Å—ñ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

```bash
# ‚úÖ –ë–µ–∑ —Ç—ñ–ª–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
curl -X POST 'http://localhost:8000/bulk/tag-space/nkfedba'

# ‚úÖ –ó query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
curl -X POST 'http://localhost:8000/bulk/tag-space/nkfedba?dry_run=true'

# ‚úÖ –ó –ø–æ—Ä–æ–∂–Ω—ñ–º JSON (—Ç–∞–∫–æ–∂ –ø—Ä–∞—Ü—é—î)
curl -X POST 'http://localhost:8000/bulk/tag-space/nkfedba' \
  -H 'Content-Type: application/json' \
  -d '{}'
```

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å–ø–æ—Å—ñ–±:

```bash
# ‚ùå –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫
curl -X POST 'http://localhost:8000/bulk/tag-space/nkfedba' -d ''

# ‚ùå –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π JSON
curl -X POST 'http://localhost:8000/bulk/tag-space/nkfedba' -d 'null'
```

## üìã –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É

–í—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ **Query String**:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | Default | –û–ø–∏—Å |
|----------|-----|---------|------|
| `dry_run` | boolean | None | Override agent mode |

**–ü—Ä–∏–∫–ª–∞–¥:**
```bash
curl -X POST 'http://localhost:8000/bulk/tag-space/nkfedba?dry_run=false'
```

## üîß –©–æ –±—É–ª–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è JSON –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:**
   - –í–∏–¥–∞–ª–µ–Ω–æ –∑–∞–π–≤—ñ –∫–æ–º–∏ –≤ `whitelist_config.json`
   - JSON —Ç–µ–ø–µ—Ä –≤–∞–ª—ñ–¥–Ω–∏–π

2. **–î–æ–¥–∞–Ω–æ —Ç–µ—Å—Ç–∏:**
   - `test_tag_space_empty_body.py` - 8 —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤
   - –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å ‚úÖ

3. **–ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**
   - POST –±–µ–∑ —Ç—ñ–ª–∞ ‚úÖ
   - POST –∑ –ø–æ—Ä–æ–∂–Ω—ñ–º JSON ‚úÖ
   - POST –∑ query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ ‚úÖ
   - POST –±–µ–∑ Content-Type ‚úÖ

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–∏:
```bash
pytest tests/test_tag_space_empty_body.py -v
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚úÖ 8/8 —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç—å
```

## üìö Swagger UI

–í—ñ–¥–∫—Ä–∏–π—Ç–µ http://localhost:8000/docs —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –µ–Ω–¥–ø–æ—ñ–Ω—Ç:

- **Method:** POST
- **Path:** `/bulk/tag-space/{space_key}`
- **Parameters:** Query parameters (–Ω–µ Body)
- **Request body:** –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–µ

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ POST –±–µ–∑ —Ç—ñ–ª–∞** —è–∫—â–æ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –¥–∞–Ω—ñ
2. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ query –ø–∞—Ä–∞–º–µ—Ç—Ä–∏** –¥–ª—è dry_run —Ç–∞ —ñ–Ω—à–∏—Ö –æ–ø—Ü—ñ–π
3. **–ù–µ –Ω–∞–¥—Å–∏–ª–∞–π—Ç–µ `-d ''`** –≤ curl –∫–æ–º–∞–Ω–¥–∞—Ö –¥–ª—è —Ü—å–æ–≥–æ –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É

## üîç –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

- **–ö–æ–¥:** `src/api/routers/bulk.py`
- **–¢–µ—Å—Ç–∏:** `tests/test_tag_space_empty_body.py`
- **Whitelist:** `src/core/whitelist/whitelist_config.json`
