# üìã –ó–í–Ü–¢ –ê–£–î–ò–¢–£: Bulk-–µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ (tag-pages / tag-tree / tag-space)

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç—É:** 2025-12-29  
**–ê—É–¥–∏—Ç–æ—Ä:** VS Code Agent  
**–°—Ç–∞—Ç—É—Å:** –ö—Ä–∏—Ç–∏—á–Ω—ñ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –≤–∏—è–≤–ª–µ–Ω–æ ‚ö†Ô∏è

---

## 1. üö® –ú–ê–†–®–†–£–¢–ò ‚Äî –ö–†–ò–¢–ò–ß–ù–Ü –ö–û–ù–§–õ–Ü–ö–¢–ò

### –í–∏—è–≤–ª–µ–Ω—ñ –¥—É–±–ª—ñ–∫–∞—Ç–∏ –º–∞—Ä—à—Ä—É—Ç—ñ–≤:

| –ú–∞—Ä—à—Ä—É—Ç | –†–æ—É—Ç–µ—Ä 1 (bulk.py) | –†–æ—É—Ç–µ—Ä 2 (bulk_tagging_router.py) | –†–æ—É—Ç–µ—Ä 3 (bulk_tag_space.py) | –°—Ç–∞—Ç—É—Å |
|---------|-------------------|-----------------------------------|------------------------------|--------|
| `POST /bulk/tag-pages` | ‚úÖ –ê–∫—Ç–∏–≤–Ω–∏–π | ‚ùå –ó–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ | - | ‚ö†Ô∏è –ö–æ–Ω—Ñ–ª—ñ–∫—Ç —Ä–æ–∑–≤'—è–∑–∞–Ω–æ |
| `POST /bulk/tag-space/{space_key}` | ‚úÖ –ê–∫—Ç–∏–≤–Ω–∏–π | ‚ùå –ó–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ | ‚úÖ **–ê–ö–¢–ò–í–ù–ò–ô** | üî¥ **–ê–ö–¢–ò–í–ù–ò–ô –ö–û–ù–§–õ–Ü–ö–¢** |
| `POST /bulk/tag-tree/{space_key}/{root_page_id}` | ‚úÖ –ê–∫—Ç–∏–≤–Ω–∏–π | ‚ùå –ó–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ | - | ‚ö†Ô∏è –ö–æ–Ω—Ñ–ª—ñ–∫—Ç —Ä–æ–∑–≤'—è–∑–∞–Ω–æ |

### üî¥ –ö–†–ò–¢–ò–ß–ù–ê –ü–†–û–ë–õ–ï–ú–ê #1: –î—É–±–ª—é–≤–∞–Ω–Ω—è `/bulk/tag-space`

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–î–≤–∞ —Ä–æ—É—Ç–µ—Ä–∏ —Ä–µ—î—Å—Ç—Ä—É—é—Ç—å —ñ–¥–µ–Ω—Ç–∏—á–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç `POST /bulk/tag-space/{space_key}`:

1. **`bulk.py` (—Ä—è–¥–æ–∫ 58):**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `BulkTaggingService().tag_space()`
   - Query –ø–∞—Ä–∞–º–µ—Ç—Ä: `dry_run: Optional[bool]`
   - –ë–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö —Ñ—ñ–ª—å—Ç—Ä—ñ–≤

2. **`bulk_tag_space.py` (—Ä—è–¥–æ–∫ 17):**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `BulkTagOrchestrator`
   - Query –ø–∞—Ä–∞–º–µ—Ç—Ä–∏: `dry_run`, `exclude_archived`, `exclude_index_pages`, `exclude_templates`, `exclude_empty_pages`, `exclude_by_title_regex`
   - –î–æ–¥–∞—Ç–∫–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó

**–ü–æ—Ç–æ—á–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞:**  
FastAPI —Ä–µ—î—Å—Ç—Ä—É—î **–ø–µ—Ä—à–∏–π** —Ä–æ—É—Ç–µ—Ä, —è–∫–∏–π –∑—É—Å—Ç—Ä—ñ—á–∞—î. –ü–æ—Ä—è–¥–æ–∫ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –≤ `main.py`:
```python
app.include_router(bulk_router)           # ‚Üê bulk.py —Ä–µ—î—Å—Ç—Ä—É—î—Ç—å—Å—è –ü–ï–†–®–ò–ú
app.include_router(bulk_tag_space_router) # ‚Üê bulk_tag_space.py —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è!
```

**–ù–∞—Å–ª—ñ–¥–æ–∫:**  
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ù–ï –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏ –∑ `bulk_tag_space.py`
- –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –±–∞–∑–æ–≤–∞ –≤–µ—Ä—Å—ñ—è –∑ `bulk.py`

---

## 2. üìÇ –†–û–£–¢–ï–†–ò –Ü main.py

### –ü—ñ–¥–∫–ª—é—á–µ–Ω—ñ —Ä–æ—É—Ç–µ—Ä–∏:

```python
# main.py
app.include_router(bulk_router)              # ‚úÖ bulk.py
# app.include_router(bulk_tagging_router)    # ‚ùå –ó–ê–ö–û–ú–ï–ù–¢–û–í–ê–ù–û
app.include_router(bulk_tag_space_router)    # ‚úÖ bulk_tag_space.py (–ù–ï –ü–†–ê–¶–Æ–Ñ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç)
```

### –°—Ç–∞—Ç—É—Å —Ä–æ—É—Ç–µ—Ä—ñ–≤:

| –§–∞–π–ª | –ü—Ä–µ—Ñ—ñ–∫—Å | –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ | –ü—ñ–¥–∫–ª—é—á–µ–Ω–∏–π | –î–æ—Å—Ç—É–ø–Ω–∏–π |
|------|---------|-----------|-------------|-----------|
| `bulk.py` | `/bulk` | `/tag-pages`, `/tag-space`, `/tag-tree` | ‚úÖ –¢–∞–∫ | ‚úÖ –¢–∞–∫ |
| `bulk_tagging_router.py` | `/bulk` | `/tag-pages`, `/tag-space`, `/tag-tree` | ‚ùå –ó–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ | ‚ùå –ù—ñ |
| `bulk_tag_space.py` | `/bulk` | `/tag-space` | ‚úÖ –¢–∞–∫ | ‚ùå **–ù–Ü (–∫–æ–Ω—Ñ–ª—ñ–∫—Ç –∑ bulk.py)** |

### üî¥ –ö–†–ò–¢–ò–ß–ù–ê –ü–†–û–ë–õ–ï–ú–ê #2: –í—Ç—Ä–∞—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

**–í—Ç—Ä–∞—á–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –†–æ–∑—à–∏—Ä–µ–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏ –¥–ª—è `tag-space` (`exclude_archived`, `exclude_index_pages`, etc.)
- `BulkTagOrchestrator` –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–æ—é –ª–æ–≥—ñ–∫–æ—é —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó

**–†–∏–∑–∏–∫:**
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ, —è–∫—ñ –æ—á—ñ–∫—É—é—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏, –æ—Ç—Ä–∏–º–∞—é—Ç—å –ø–æ–º–∏–ª–∫—É –∞–±–æ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É

---

## 3. üîß –°–ï–†–í–Ü–°–ù–ò–ô –®–ê–†: BulkTaggingService

### –ú–µ—Ç–æ–¥–∏ —Å–µ—Ä–≤—ñ—Å—É:

| –ú–µ—Ç–æ–¥ | –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ | Whitelist | –†–µ–∂–∏–º–Ω–∞ –ª–æ–≥—ñ–∫–∞ | –°—Ç–∞—Ç—É—Å |
|-------|-----------|-----------|----------------|--------|
| `tag_pages()` | `page_ids`, `space_key`, `dry_run` | ‚úÖ –¢–∞–∫ | ‚úÖ TEST/SAFE_TEST/PROD | ‚úÖ –ö–æ—Ä–µ–∫—Ç–Ω–æ |
| `tag_tree()` | `root_page_id`, `space_key`, `dry_run` | ‚úÖ –¢–∞–∫ | ‚úÖ TEST/SAFE_TEST/PROD | ‚úÖ –ö–æ—Ä–µ–∫—Ç–Ω–æ |
| `tag_space()` | `space_key`, `dry_run` | ‚úÖ –¢–∞–∫ | ‚ö†Ô∏è –Ü–Ω—à–∞ –ª–æ–≥—ñ–∫–∞ | ‚ö†Ô∏è –†–æ–∑–±—ñ–∂–Ω—ñ—Å—Ç—å |

### –î–µ—Ç–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–∂–Ω–æ–≥–æ –º–µ—Ç–æ–¥—É:

#### A. `tag_pages(page_ids, space_key, dry_run)`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- ‚úÖ `space_key: str` ‚Äî –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π
- ‚úÖ `page_ids: list[str]` ‚Äî –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π
- ‚úÖ `dry_run: bool = None` ‚Äî –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π

**Whitelist:**
```python
whitelist_manager = WhitelistManager()
allowed_ids = await whitelist_manager.get_allowed_ids(space_key, self.confluence)
filtered_ids = [pid for pid in page_ids_int if pid in allowed_ids]
```
- ‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î whitelist —á–µ—Ä–µ–∑ `WhitelistManager`
- ‚úÖ –§—ñ–ª—å—Ç—Ä—É—î `page_ids` —á–µ—Ä–µ–∑ `allowed_ids`
- ‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—î 403 —è–∫—â–æ whitelist –ø–æ—Ä–æ–∂–Ω—ñ–π –∞–±–æ –≤—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ

**–†–µ–∂–∏–º–Ω–∞ –ª–æ–≥—ñ–∫–∞:**
```python
if mode == "TEST":
    effective_dry_run = True  # –§–æ—Ä—Å–æ–≤–∞–Ω–æ
elif mode == "SAFE_TEST":
    effective_dry_run = dry_run if dry_run is not None else True
elif mode == "PROD":
    effective_dry_run = dry_run if dry_run is not None else True
```
- ‚úÖ TEST: –∑–∞–≤–∂–¥–∏ `dry_run=True`
- ‚úÖ SAFE_TEST/PROD: –∫–µ—Ä—É—î—Ç—å—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º

**–í–∏—Å–Ω–æ–≤–æ–∫:** ‚úÖ **–ö–æ—Ä–µ–∫—Ç–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**

---

#### B. `tag_tree(root_page_id, space_key, dry_run)`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- ‚úÖ `root_page_id: str` ‚Äî –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π
- ‚úÖ `space_key: str = None` ‚Äî **–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π** (–º–∞—î –±—É—Ç–∏ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º!)
- ‚úÖ `dry_run: bool = False` ‚Äî –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π

‚ö†Ô∏è **–ü–†–û–ë–õ–ï–ú–ê:** `space_key` –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π, –∞–ª–µ whitelist –≤–∏–º–∞–≥–∞—î –π–æ–≥–æ!

**Whitelist:**
```python
if space_key:
    allowed_ids = await whitelist_manager.get_allowed_ids(space_key, self.confluence)
else:
    whitelist_enabled = False  # Deprecated path
```
- ‚ö†Ô∏è –î–æ–∑–≤–æ–ª—è—î —Ä–æ–±–æ—Ç—É –ë–ï–ó `space_key` (deprecated —Ä–µ–∂–∏–º)
- ‚úÖ –ó `space_key` ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î whitelist

**–†–µ–∂–∏–º–Ω–∞ –ª–æ–≥—ñ–∫–∞:**
- ‚úÖ –Ü–¥–µ–Ω—Ç–∏—á–Ω–∞ `tag_pages` (TEST/SAFE_TEST/PROD)

**–í–∏—Å–Ω–æ–≤–æ–∫:** ‚ö†Ô∏è **–ü–æ—Ç—Ä–µ–±—É—î —É–≤–∞–≥–∏** ‚Äî `space_key` –º–∞—î –±—É—Ç–∏ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º

---

#### C. `tag_space(space_key, dry_run)`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- ‚úÖ `space_key: str` ‚Äî –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π
- ‚úÖ `dry_run: Optional[bool] = None` ‚Äî –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π

**Whitelist:**
```python
whitelist_enabled = True  # –ó–∞–≤–∂–¥–∏
allowed_ids = await whitelist_manager.get_allowed_ids(space_key, self.confluence)
```
- ‚úÖ –ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î whitelist

**–†–µ–∂–∏–º–Ω–∞ –ª–æ–≥—ñ–∫–∞:**
```python
if dry_run is None:
    dry_run = self.agent.is_dry_run()  # ‚Üê –Ü–ù–®–ê –õ–û–ì–Ü–ö–ê!
```
- ‚ö†Ô∏è –Ø–∫—â–æ `dry_run=None`, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `agent.is_dry_run()` –∑–∞–º—ñ—Å—Ç—å —è–≤–Ω–æ—ó —Ä–µ–∂–∏–º–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ
- ‚ö†Ô∏è –ù–µ–º–∞—î —è–≤–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ `mode == "TEST"` –¥–ª—è —Ñ–æ—Ä—Å—É–≤–∞–Ω–Ω—è `dry_run=True`

**–í–∏—Å–Ω–æ–≤–æ–∫:** ‚ö†Ô∏è **–†–æ–∑–±—ñ–∂–Ω—ñ—Å—Ç—å –∑ tag_pages/tag_tree** ‚Äî –ª–æ–≥—ñ–∫–∞ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è `effective_dry_run` –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è

---

### üî¥ –ö–†–ò–¢–ò–ß–ù–ê –ü–†–û–ë–õ–ï–ú–ê #3: –ù–µ—É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞ dry_run

**–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è:**

| –ú–µ—Ç–æ–¥ | –Ø–∫—â–æ dry_run=None | –†–µ–∂–∏–º–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è | –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ |
|-------|-------------------|-----------------|-------------|
| `tag_pages` | `effective_dry_run` —á–µ—Ä–µ–∑ —Ä–µ–∂–∏–º | ‚úÖ –Ø–≤–Ω–∞ (TEST/SAFE/PROD) | ‚úÖ –¢–∞–∫ |
| `tag_tree` | `effective_dry_run` —á–µ—Ä–µ–∑ —Ä–µ–∂–∏–º | ‚úÖ –Ø–≤–Ω–∞ (TEST/SAFE/PROD) | ‚úÖ –¢–∞–∫ |
| `tag_space` | `self.agent.is_dry_run()` | ‚ö†Ô∏è –ù–µ—è–≤–Ω–∞ | ‚ùå **–ù–Ü** |

**–†–∏–∑–∏–∫:**
- –í `tag_space` —Ä–µ–∂–∏–º TEST –º–æ–∂–µ **–Ω–µ —Ñ–æ—Ä—Å—É–≤–∞—Ç–∏** `dry_run=True`, —è–∫—â–æ `agent.is_dry_run()` –ø–æ–≤–µ—Ä—Ç–∞—î False

---

## 4. üì¶ –ú–û–î–ï–õ–Ü

### –Ü—Å–Ω—É—é—á—ñ –º–æ–¥–µ–ª—ñ:

| –ú–æ–¥–µ–ª—å | –§–∞–π–ª | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è | –°—Ç–∞—Ç—É—Å |
|--------|------|------------------|--------|
| `TagPagesRequest` | `src/models/tag_pages_models.py` | ‚úÖ `bulk.py`, `bulk_tagging_router.py` | ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–∞ |
| `BulkTagRequest` | `src/api/routers/bulk.py` | ‚ùå –ù—ñ–¥–µ (deprecated) | ‚ö†Ô∏è –ó–∞—Å—Ç–∞—Ä—ñ–ª–∞ |

### TagPagesRequest:

```python
class TagPagesRequest(BaseModel):
    space_key: str           # ‚úÖ –û–±–æ–≤'—è–∑–∫–æ–≤–µ
    page_ids: List[str]      # ‚úÖ –û–±–æ–≤'—è–∑–∫–æ–≤–µ
    dry_run: Optional[bool] = True  # ‚úÖ –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ –∑ default
```

**–í–∏—Å–Ω–æ–≤–æ–∫:** ‚úÖ **–ö–æ—Ä–µ–∫—Ç–Ω–∞ –º–æ–¥–µ–ª—å**

### BulkTagRequest (deprecated):

```python
class BulkTagRequest(BaseModel):
    page_ids: List[str]      # ‚ùå –ù–µ–º–∞—î space_key!
    dry_run: bool = False
```

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ü–æ–∑–Ω–∞—á–µ–Ω–∞ —è–∫ deprecated, –∞–ª–µ —â–µ —ñ—Å–Ω—É—î –≤ –∫–æ–¥—ñ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –í–∏–¥–∞–ª–∏—Ç–∏ –∞–±–æ –ø–µ—Ä–µ–º—ñ—Å—Ç–∏—Ç–∏ –≤ –æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª `deprecated_models.py`

---

## 5. üß™ –¢–ï–°–¢–ò

### –ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏:

| –ï–Ω–¥–ø–æ—ñ–Ω—Ç | –§–∞–π–ª —Ç–µ—Å—Ç—É | –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–µ—Å—Ç—ñ–≤ | –ü–æ–∫—Ä–∏—Ç—Ç—è —Ä–µ–∂–∏–º—ñ–≤ | –ü–æ–∫—Ä–∏—Ç—Ç—è whitelist | –°—Ç–∞—Ç—É—Å |
|----------|-----------|------------------|------------------|-------------------|--------|
| `/tag-pages` | `test_tag_pages_modes.py` | 9 | ‚úÖ TEST/SAFE/PROD | ‚úÖ –¢–∞–∫ | ‚úÖ –ü–æ–≤–Ω–µ |
| `/tag-tree` | `test_tag_tree_modes.py` | 3+ | ‚úÖ TEST/SAFE/PROD | ‚úÖ –¢–∞–∫ | ‚úÖ –î–æ–±—Ä–µ |
| `/tag-space` | `test_bulk_tag_space.py` | 10+ | ‚úÖ TEST/SAFE/PROD | ‚úÖ –¢–∞–∫ | ‚úÖ –î–æ–±—Ä–µ |

### –î–µ—Ç–∞–ª—å–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ —Ç–µ—Å—Ç—ñ–≤:

#### test_tag_pages_modes.py (380 —Ä—è–¥–∫—ñ–≤)

**–ü–æ–∫—Ä–∏—Ç—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**
- ‚úÖ TEST —Ä–µ–∂–∏–º: –∑–∞–≤–∂–¥–∏ dry_run=True
- ‚úÖ SAFE_TEST: dry_run=True ‚Üí —Å–∏–º—É–ª—è—Ü—ñ—è
- ‚úÖ SAFE_TEST: dry_run=False ‚Üí —Ä–µ–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏
- ‚úÖ PROD: dry_run=True ‚Üí —Å–∏–º—É–ª—è—Ü—ñ—è
- ‚úÖ PROD: dry_run=False ‚Üí —Ä–µ–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏
- ‚úÖ Whitelist —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è
- ‚úÖ 403 —è–∫—â–æ –≤—Å—ñ page_ids –ø–æ–∑–∞ whitelist
- ‚úÖ 403 —è–∫—â–æ whitelist –ø–æ—Ä–æ–∂–Ω—ñ–π
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

**–ü—Ä–æ–ø—É—â–µ–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**
- ‚ùå –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –∑ —Ä–µ–∞–ª—å–Ω–∏–º API
- ‚ùå –¢–µ—Å—Ç–∏ –Ω–∞ –≤–µ–ª–∏–∫—ñ —Å–ø–∏—Å–∫–∏ page_ids (100+)
- ‚ùå –¢–µ—Å—Ç–∏ –Ω–∞ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ page_ids (–Ω–µ int)

**–í–∏—Å–Ω–æ–≤–æ–∫:** ‚úÖ **–í—ñ–¥–º—ñ–Ω–Ω–µ –ø–æ–∫—Ä–∏—Ç—Ç—è**

---

#### test_tag_tree_modes.py (210 —Ä—è–¥–∫—ñ–≤)

**–ü–æ–∫—Ä–∏—Ç—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**
- ‚úÖ TEST: –∑–∞–≤–∂–¥–∏ dry_run=True
- ‚úÖ SAFE_TEST: dry_run –∫–µ—Ä—É—î—Ç—å—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
- ‚úÖ PROD: dry_run –∫–µ—Ä—É—î—Ç—å—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
- ‚úÖ Whitelist —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

**–ü—Ä–æ–ø—É—â–µ–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**
- ‚ö†Ô∏è –¢–µ—Å—Ç –Ω–∞ –≤–∏–ø–∞–¥–æ–∫ –∫–æ–ª–∏ `space_key=None` (deprecated —Ä–µ–∂–∏–º)
- ‚ùå –¢–µ—Å—Ç –Ω–∞ –≤–µ–ª–∏–∫–µ –¥–µ—Ä–µ–≤–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫
- ‚ùå –¢–µ—Å—Ç –Ω–∞ —Ü–∏–∫–ª—ñ—á–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

**–í–∏—Å–Ω–æ–≤–æ–∫:** ‚úÖ **–î–æ–±—Ä–µ –ø–æ–∫—Ä–∏—Ç—Ç—è**

---

#### test_bulk_tag_space.py (444 —Ä—è–¥–∫–∏)

**–ü–æ–∫—Ä–∏—Ç—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**
- ‚úÖ TEST/SAFE_TEST/PROD —Ä–µ–∂–∏–º–∏
- ‚úÖ Whitelist —É SAFE_TEST
- ‚úÖ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è archived/index/empty pages
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ AI
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ Confluence
- ‚úÖ –û–±–º–µ–∂–µ–Ω–Ω—è —Ç–µ–≥—ñ–≤

**–ü—Ä–æ–ø—É—â–µ–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**
- ‚ö†Ô∏è –¢–µ—Å—Ç–∏ –Ω–∞ —Ä–æ–∑–±—ñ–∂–Ω—ñ—Å—Ç—å –ª–æ–≥—ñ–∫–∏ `dry_run` –∑ `tag_pages`
- ‚ùå –¢–µ—Å—Ç–∏ –Ω–∞ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∑ `bulk_tag_space.py` —Ä–æ—É—Ç–µ—Ä–æ–º

**–í–∏—Å–Ω–æ–≤–æ–∫:** ‚úÖ **–í—ñ–¥–º—ñ–Ω–Ω–µ –ø–æ–∫—Ä–∏—Ç—Ç—è**, –∞–ª–µ –Ω–µ —Ç–µ—Å—Ç—É—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç —Ä–æ—É—Ç–µ—Ä—ñ–≤

---

### üî¥ –ö–†–ò–¢–ò–ß–ù–ê –ü–†–û–ë–õ–ï–ú–ê #4: –¢–µ—Å—Ç–∏ –Ω–µ –≤–∏—è–≤–ª—è—é—Ç—å –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ —Ä–æ—É—Ç–µ—Ä—ñ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ñ–æ–¥–µ–Ω —Ç–µ—Å—Ç –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —è–∫–∏–π —Å–∞–º–µ —Ä–æ—É—Ç–µ—Ä –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç `/bulk/tag-space`.

**–ù–∞—Å–ª—ñ–¥–æ–∫:**  
–¢–µ—Å—Ç–∏ –º–æ–∂—É—Ç—å –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –Ω–µ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏.

---

## 6. ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–Ü–ô–ù–ò–ô –í–ü–õ–ò–í –ó–ú–Ü–ù

### –í–Ω–µ—Å–µ–Ω—ñ –∑–º—ñ–Ω–∏ (–æ—Å—Ç–∞–Ω–Ω—ñ):

1. ‚úÖ –î–æ–¥–∞–Ω–æ `TagPagesRequest` –º–æ–¥–µ–ª—å –∑ `space_key`
2. ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ `bulk.py` –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `TagPagesRequest`
3. ‚úÖ –î–æ–¥–∞–Ω–æ `/tag-tree` –≤ `bulk.py`
4. ‚ö†Ô∏è –ó–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ `bulk_tagging_router` –≤ `main.py`
5. ‚ùå **–ù–ï –≤–∏–¥–∞–ª–µ–Ω–æ** –¥—É–±–ª—ñ–∫–∞—Ç `/tag-space` –≤ `bulk_tag_space.py`

### –†–∏–∑–∏–∫–∏:

#### üî¥ –í–ò–°–û–ö–ò–ô –†–ò–ó–ò–ö

1. **–í—Ç—Ä–∞—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É —Ä–æ–∑—à–∏—Ä–µ–Ω–∏—Ö —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –¥–ª—è `/tag-space`**
   - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –Ω–µ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `exclude_archived`, `exclude_index_pages`, etc.
   - `BulkTagOrchestrator` –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π

2. **–ù–µ—É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ `dry_run` –≤ `tag_space`**
   - –ú–æ–∂–µ –Ω–µ —Ñ–æ—Ä—Å—É–≤–∞—Ç–∏ `dry_run=True` –≤ TEST —Ä–µ–∂–∏–º—ñ
   - –†–æ–∑–±—ñ–∂–Ω—ñ—Å—Ç—å –∑ `tag_pages` —ñ `tag_tree`

3. **–ó–∞—Å—Ç–∞—Ä—ñ–ª–∞ –º–æ–¥–µ–ª—å `BulkTagRequest` –ª–∏—à–∏–ª–∞—Å—è –≤ –∫–æ–¥—ñ**
   - –ú–æ–∂–µ –∑–∞–ø–ª—É—Ç–∞—Ç–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤
   - –†–∏–∑–∏–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–∞—Å—Ç–∞—Ä—ñ–ª–æ—ó –º–æ–¥–µ–ª—ñ

#### ‚ö†Ô∏è –°–ï–†–ï–î–ù–Ü–ô –†–ò–ó–ò–ö

4. **`space_key` –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –≤ `tag_tree`**
   - –î–æ–∑–≤–æ–ª—è—î —Ä–æ–±–æ—Ç—É –±–µ–∑ whitelist (deprecated)
   - –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ –∑ `tag_pages`

5. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤**
   - –ù–µ–º–æ–∂–ª–∏–≤–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∞–ª—å–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

#### ‚ÑπÔ∏è –ù–ò–ó–¨–ö–ò–ô –†–ò–ó–ò–ö

6. **–ó–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π `bulk_tagging_router.py`**
   - –ù–µ –≤–∏–¥–∞–ª–µ–Ω–∏–π –∑ –∫–æ–¥–æ–≤–æ—ó –±–∞–∑–∏
   - –ú–æ–∂–µ –∑–∞–ø–ª—É—Ç–∞—Ç–∏ –ø—Ä–∏ code review

---

## 7. üéØ –ù–ê–ô–ß–£–¢–õ–ò–í–Ü–®–Ü –ï–ù–î–ü–û–Ü–ù–¢–ò –î–û –†–ï–ì–†–ï–°–Ü–ô

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

1. **üî¥ `/bulk/tag-space` (–ö–†–ò–¢–ò–ß–ù–ò–ô)**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —è–∫–∏–π —Ä–æ—É—Ç–µ—Ä –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–∏—Ö —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ—Å—Ç—å dry_run –ª–æ–≥—ñ–∫–∏

2. **‚ö†Ô∏è `/bulk/tag-pages` (–°–ï–†–ï–î–ù–Ü–ô)**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ whitelist —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∂–∏–º–Ω—É –º–∞—Ç—Ä–∏—Ü—é (–æ—Å–æ–±–ª–∏–≤–æ TEST –∑ dry_run=false)

3. **‚ö†Ô∏è `/bulk/tag-tree` (–°–ï–†–ï–î–ù–Ü–ô)**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –±–µ–∑ `space_key`
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ whitelist –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –¥–µ—Ä–µ–≤

---

## 8. ‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á –î–û –ú–ê–ù–£–ê–õ–¨–ù–û–ì–û –¢–ï–°–¢–£–í–ê–ù–ù–Ø

### –¢–µ—Å—Ç–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É:

#### `/bulk/tag-pages`:

```bash
# 1. TEST —Ä–µ–∂–∏–º + dry_run=false (–º–∞—î —Ñ–æ—Ä—Å—É–≤–∞—Ç–∏ dry_run=true)
export TAGGING_AGENT_MODE=TEST
curl -X POST http://localhost:8000/bulk/tag-pages \
  -H 'Content-Type: application/json' \
  -d '{"space_key": "nkfedba", "page_ids": ["19699862097"], "dry_run": false}'
# –û—á—ñ–∫—É—î—Ç—å—Å—è: dry_run=true –≤ response

# 2. SAFE_TEST + whitelist —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è
export TAGGING_AGENT_MODE=SAFE_TEST
curl -X POST http://localhost:8000/bulk/tag-pages \
  -H 'Content-Type: application/json' \
  -d '{"space_key": "nkfedba", "page_ids": ["19699862097", "99999999"], "dry_run": true}'
# –û—á—ñ–∫—É—î—Ç—å—Å—è: skipped_by_whitelist > 0

# 3. –ü–æ—Ä–æ–∂–Ω—ñ–π whitelist
curl -X POST http://localhost:8000/bulk/tag-pages \
  -H 'Content-Type: application/json' \
  -d '{"space_key": "nonexistent", "page_ids": ["123"], "dry_run": true}'
# –û—á—ñ–∫—É—î—Ç—å—Å—è: 403 Forbidden
```

---

#### `/bulk/tag-space`:

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —è–∫–∏–π —Ä–æ—É—Ç–µ—Ä –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î (–º–∞—î –±—É—Ç–∏ bulk.py)
curl -X POST "http://localhost:8000/bulk/tag-space/nkfedba?dry_run=true&exclude_archived=false"
# –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ "unexpected parameter" ‚Üí –ø—Ä–∞—Ü—é—î bulk.py ‚úÖ
# –Ø–∫—â–æ –ø—Ä–∞—Ü—é—î ‚Üí –ø—Ä–∞—Ü—é—î bulk_tag_space.py (–∫–æ–Ω—Ñ–ª—ñ–∫—Ç!) ‚ùå

# 2. TEST —Ä–µ–∂–∏–º (–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ —Ñ–æ—Ä—Å—É—î—Ç—å—Å—è dry_run)
export TAGGING_AGENT_MODE=TEST
curl -X POST "http://localhost:8000/bulk/tag-space/nkfedba?dry_run=false"
# –û—á—ñ–∫—É—î—Ç—å—Å—è: dry_run=true –≤ response (–º–æ–∂–µ –ù–ï –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ –Ω–µ—É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—É –ª–æ–≥—ñ–∫—É!)
```

---

#### `/bulk/tag-tree`:

```bash
# 1. –ó space_key (–Ω–æ—Ä–º–∞–ª—å–Ω–∏–π —Ä–µ–∂–∏–º)
curl -X POST "http://localhost:8000/bulk/tag-tree/nkfedba/19699862097?dry_run=true"
# –û—á—ñ–∫—É—î—Ç—å—Å—è: 200 OK

# 2. –ë–µ–∑ space_key (deprecated, –º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∞–ª–µ –∑ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è–º)
# (–Ω–µ–º–æ–∂–ª–∏–≤–æ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ URL)
```

---

## 9. üìä –ü–Ü–î–°–£–ú–ö–û–í–ê –û–¶–Ü–ù–ö–ê

### –ó–∞–≥–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω: ‚ö†Ô∏è **–ü–û–¢–†–ï–ë–£–Ñ –í–¢–†–£–ß–ê–ù–ù–Ø**

| –ö–∞—Ç–µ–≥–æ—Ä—ñ—è | –û—Ü—ñ–Ω–∫–∞ | –ö–æ–º–µ–Ω—Ç–∞—Ä |
|-----------|--------|----------|
| **–ú–∞—Ä—à—Ä—É—Ç–∏** | üî¥ 2/5 | –ö—Ä–∏—Ç–∏—á–Ω–∏–π –∫–æ–Ω—Ñ–ª—ñ–∫—Ç `/tag-space` |
| **–†–æ—É—Ç–µ—Ä–∏** | ‚ö†Ô∏è 3/5 | –ó–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π —Ä–æ—É—Ç–µ—Ä, –∞–ª–µ —î –¥—É–±–ª—ñ–∫–∞—Ç |
| **–°–µ—Ä–≤—ñ—Å–Ω–∏–π —à–∞—Ä** | ‚ö†Ô∏è 4/5 | –ù–µ—É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞ –≤ `tag_space` |
| **–ú–æ–¥–µ–ª—ñ** | ‚úÖ 5/5 | –ö–æ—Ä–µ–∫—Ç–Ω—ñ, —î –∑–∞—Å—Ç–∞—Ä—ñ–ª–∞ –º–æ–¥–µ–ª—å |
| **–¢–µ—Å—Ç–∏** | ‚úÖ 5/5 | –í—ñ–¥–º—ñ–Ω–Ω–µ –ø–æ–∫—Ä–∏—Ç—Ç—è, –∞–ª–µ –Ω–µ —Ç–µ—Å—Ç—É—é—Ç—å –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ |
| **–ó–∞–≥–∞–ª—å–Ω–∞ —è–∫—ñ—Å—Ç—å** | ‚ö†Ô∏è 3.8/5 | –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ø—Ä–∞—Ü—é—î, –∞–ª–µ —î –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ |

---

## 10. üöÄ –ü–†–Ü–û–†–ò–¢–ï–¢–ù–Ü –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

### –ö—Ä–∏—Ç–∏—á–Ω—ñ (—Ç—Ä–µ–±–∞ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –ó–ê–†–ê–ó):

1. **–†–æ–∑–≤'—è–∑–∞—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç `/bulk/tag-space`**
   - –í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç –∑ `bulk.py` –ê–ë–û
   - –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏ –≤ `BulkTaggingService` –ê–ë–û
   - –ó–º—ñ–Ω–∏—Ç–∏ URL –≤ –æ–¥–Ω–æ–º—É –∑ —Ä–æ—É—Ç–µ—Ä—ñ–≤

2. **–£–Ω—ñ—Ñ—ñ–∫—É–≤–∞—Ç–∏ dry_run –ª–æ–≥—ñ–∫—É –≤ `tag_space`**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç—É —Å–∞–º—É –ª–æ–≥—ñ–∫—É, —â–æ –≤ `tag_pages` —ñ `tag_tree`

3. **–ó—Ä–æ–±–∏—Ç–∏ `space_key` –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º –≤ `tag_tree`**
   - –í–∏–¥–∞–ª–∏—Ç–∏ deprecated —Ä–µ–∂–∏–º –±–µ–∑ whitelist

### –í–∞–∂–ª–∏–≤—ñ (–º–æ–∂–Ω–∞ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ):

4. –í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞—Å—Ç–∞—Ä—ñ–ª—É `BulkTagRequest` –º–æ–¥–µ–ª—å
5. –í–∏–¥–∞–ª–∏—Ç–∏ –∞–±–æ –ø–µ—Ä–µ–º—ñ—Å—Ç–∏—Ç–∏ `bulk_tagging_router.py` –≤ –∞—Ä—Ö—ñ–≤
6. –î–æ–¥–∞—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ —Ä–æ—É—Ç–µ—Ä—ñ–≤

---

## 11. üìù –í–ò–°–ù–û–í–û–ö

**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:**  
Bulk-–µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –º–∞—é—Ç—å **–∫–æ—Ä–µ–∫—Ç–Ω—É –±–∞–∑–æ–≤—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é** –∑ whitelist-–º–µ—Ö–∞–Ω—ñ–∑–º–æ–º —Ç–∞ —Ä–µ–∂–∏–º–Ω–æ—é –ª–æ–≥—ñ–∫–æ—é. –û–¥–Ω–∞–∫ —î **–∫—Ä–∏—Ç–∏—á–Ω—ñ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏**:

- –î—É–±–ª—é–≤–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –≤—Ç—Ä–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É
- –ù–µ—É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞ –≤ `tag_space` –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É
- –¢–µ—Å—Ç–∏ –Ω–µ –ø–æ–∫—Ä–∏–≤–∞—é—Ç—å –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ —Ä–æ—É—Ç–µ—Ä—ñ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:**  
–í–∏–ø—Ä–∞–≤–∏—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ #1-#3 –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–Ω deployment.

---

**–ö—ñ–Ω–µ—Ü—å –∑–≤—ñ—Ç—É**
