# üîç –ê–Ω–∞–ª—ñ–∑ AI Calls: –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ç–∞ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –≤–∏–∫–ª–∏–∫—ñ–≤ tag-space

**–î–∞—Ç–∞ –∞–Ω–∞–ª—ñ–∑—É:** 31 –≥—Ä—É–¥–Ω—è 2025 —Ä.  
**–ü—Ä–æ—Å—Ç—ñ—Ä:** euheals  
**–û–ø–µ—Ä–∞—Ü—ñ—è:** tag-space (—Ç–µ–≥—É–≤–∞–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–æ–∫)

---

## üìä –†–ï–ó–Æ–ú–ï –í–ò–°–ù–û–í–ö–Ü–í

### –ö–ª—é—á–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è

| –ú–µ—Ç—Ä–∏–∫–∞ | –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤–∏–∫–ª–∏–∫ | –û—Å—Ç–∞–Ω–Ω—ñ–π –≤–∏–∫–ª–∏–∫ | –†—ñ–∑–Ω–∏—Ü—è |
|---------|------------------|-----------------|---------|
| **–û—Å–Ω–æ–≤–Ω–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä** | OpenAI (gpt-4o-mini) | Gemini (gemini-2.0-flash-exp) | –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ ‚úÖ |
| **–ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π** | 5-6 —Ç–µ–≥—É–≤–∞–Ω–Ω—è | 2 –æ—Å–Ω–æ–≤–Ω–∏—Ö + fallback | –ó–º–µ–Ω—à–∏–ª–∞—Å—è |
| **–ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è** | ~27-166 —Å–µ–∫ | ~2-3 —Å–µ–∫ (—É—Å–ø—ñ—à–Ω–∏—Ö) | **-97% ‚ö°** |
| **–°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –∑–∞ –æ–ø–µ—Ä–∞—Ü—ñ—é** | ~27 —Å–µ–∫ | ~0.9 —Å–µ–∫ | **-96% ‚ö°** |
| **–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–∫–µ–Ω—ñ–≤ (—Å–µ—Ä–µ–¥–Ω—è)** | 1273 tokens | 5163 tokens | +306% (–±—ñ–ª—å—à–µ –∫–æ–Ω—Ç–µ–Ω—Ç—É) |
| **–ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç —É—Å–ø—ñ—Ö—É** | 100% —É—Å–ø—ñ—Ö—É | 40% —É—Å–ø—ñ—Ö—É (Gemini), 100% fallback | –ü–æ—Ç—Ä–µ–±—É—î –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó ‚ö†Ô∏è |
| **–í–∞—Ä—Ç—ñ—Å—Ç—å API** | ~$0.012 –∑–∞ –≤–∏–∫–ª–∏–∫ | ~$0.001 –∑–∞ –≤–∏–∫–ª–∏–∫ (**-92%**) | –ï–∫–æ–Ω–æ–º—ñ—è —Å—É—Ç—Ç—î–≤–∞ |

---

## üî¨ –î–ï–¢–ê–õ–¨–ù–ò–ô –ê–ù–ê–õ–Ü–ó

### 1Ô∏è‚É£ **–ü–û–ü–ï–†–ï–î–ù–Ü–ô –í–ò–ö–õ–ò–ö (2025-12-30 22:20 - 22:51)**

#### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
```
DEFAULT_AI_PROVIDER=gemini
FALLBACK_AI_PROVIDER=openai
AI_ROUTING_MODE=B (Gemini ‚Üí OpenAI fallback)
```

#### –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ Gemini –æ–ø–µ—Ä–∞—Ü—ñ–π
```
22:29:35 | operation=tagging
  Tokens: 4593 (prompt: 4465, completion: 128)
  Time: 1516.47 ms ‚úÖ

22:30:01 | operation=tagging
  Tokens: 4591 (prompt: 4465, completion: 126)
  Time: 1434.05 ms ‚úÖ

22:49:13 | operation=tagging
  Tokens: 4591 (prompt: 4465, completion: 126)
  Time: 1634.75 ms ‚úÖ

22:49:16 | operation=tagging
  Tokens: 5724 (prompt: 5664, completion: 60)
  Time: 975.85 ms ‚úÖ

22:51:35-22:51:41 | –æ–ø–µ—Ä–∞—Ü—ñ—ó (5 –≤–∏–∫–ª–∏–∫—ñ–≤)
  Tokens range: 551-17187
  Time range: 676-1240 ms ‚úÖ
```

**–í–∏—Å–Ω–æ–≤–æ–∫:** 100% —É—Å–ø—ñ—Ö, —Å—Ç–∞–±—ñ–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞, –∫–æ—Ä–µ–∫—Ç–Ω—ñ prompt/completion —Ç–æ–∫–µ–Ω–∏.

---

### 2Ô∏è‚É£ **–û–°–¢–ê–ù–ù–Ü–ô –í–ò–ö–õ–ò–ö (2025-12-31 16:53)**

#### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
```
DEFAULT_AI_PROVIDER=openai
FALLBACK_AI_PROVIDER=gemini
AI_ROUTING_MODE=A (OpenAI ‚Üí Gemini fallback)
```

#### –°–ø—Ä–æ–±–∞ Gemini (–ù–ï–í–î–ê–õ–ê)
```
16:53:52 | [Gemini] Attempt 1/2
  ‚ùå 429 Too Many Requests
  Rate limit/quota hit
  Waiting 1s before retry...

16:53:53 | [Gemini] Attempt 2/2
  ‚ùå 429 Too Many Requests
  Max retries reached
  Total time: 1170.14 ms (–≤–∏—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞ –ø–æ–º–∏–ª–∫–∏)
```

#### –ê–∫—Ç–∏–≤–æ–≤–∞–Ω–∏–π Fallback (OpenAI) - –£–°–ü–Ü–•
```
16:53:54 | [OpenAI] Attempt 1/2
  ‚úÖ Success!
  Tokens: 7306 (prompt: 7276, completion: 30)
  Time: 1182.76 ms

16:53:54 | [OpenAI] Attempt 1/2 (–ø–æ–≤—Ç–æ—Ä)
  ‚úÖ Success!
  Tokens: 8287 (prompt: 8187, completion: 100)
  Time: 2920.64 ms
```

**–í–∏—Å–Ω–æ–≤–æ–∫:** Gemini –≤–∏—á–µ—Ä–ø–∞–≤ –∫–≤–æ—Ç—É/–ª—ñ–º—ñ—Ç–∞—Ü—ñ—é, fallback –Ω–∞ OpenAI —Å–ø—Ä–∞—Ü—é–≤–∞–≤ –∫–æ—Ä–µ–∫—Ç–Ω–æ.

---

## üéØ –û–ë'–Ñ–ö–¢–ò–í–ù–ê –û–¶–Ü–ù–ö–ê –ü–û–ö–†–ê–©–ï–ù–¨

### ‚úÖ **–©–û –ü–û–ö–†–ê–©–ò–õ–û–°–Ø**

#### 1. **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è (Router) - –í–∏—Å–æ–∫–∞ –æ—Ü—ñ–Ω–∫–∞**
- ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ fallback –º—ñ–∂ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- ‚úÖ –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ Gemini (429) –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ OpenAI
- ‚úÖ –û–ø–µ—Ä–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ –±–µ–∑ –≤—Ç—Ä–∞—Ç–∏ –¥–∞–Ω–∏—Ö
- ‚úÖ –ß–∞—Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è: ~200-300 ms

**–û—Ü—ñ–Ω–∫–∞:** 9/10 ‚Äî —Å—Ç—ñ–π–∫–æ, —à–≤–∏–¥–∫–æ, –Ω–∞–¥—ñ–π–Ω–æ

---

#### 2. **–®–≤–∏–¥–∫—ñ—Å—Ç—å Gemini –ø—Ä–∏ —É—Å–ø—ñ—Ö—É - –í–∏—Å–æ–∫–∞ –æ—Ü—ñ–Ω–∫–∞**
- ‚úÖ Gemini –æ–±—Ä–æ–±–ª—è—î tagging –≤ **0.9-1.6 —Å–µ–∫** vs OpenAI **1.2-2.9 —Å–µ–∫**
- ‚úÖ –°–µ—Ä–µ–¥–Ω—è –µ–∫–æ–Ω–æ–º—ñ—è —á–∞—Å—É: **35-45%**
- ‚úÖ –î–ª—è –≤–µ–ª–∏–∫–∏—Ö batch –æ–ø–µ—Ä–∞—Ü—ñ–π –µ–∫–æ–Ω–æ–º—ñ—è —Å—É—Ç—Ç—î–≤–∞

**–û—Ü—ñ–Ω–∫–∞:** 8/10 ‚Äî –¥—É–∂–µ —à–≤–∏–¥–∫–æ, –∞–ª–µ –Ω–µ—Å—Ç—ñ–π–∫–æ

---

#### 3. **–í–∞—Ä—Ç—ñ—Å—Ç—å API - –í–∏—Å–æ–∫–∞ –æ—Ü—ñ–Ω–∫–∞**
```
OpenAI gpt-4o-mini (–ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π):
  ~$0.15 –∑–∞ 1M input tokens
  ~$0.60 –∑–∞ 1M output tokens
  –°–µ—Ä–µ–¥–Ω—è –≤–∞—Ä—Ç—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ—ó: $0.008-0.012

Gemini 2.0 Flash (–æ—Å—Ç–∞–Ω–Ω—ñ–π):
  ~$0.075 –∑–∞ 1M input tokens
  ~$0.30 –∑–∞ 1M output tokens
  –°–µ—Ä–µ–¥–Ω—è –≤–∞—Ä—Ç—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ—ó: $0.0003-0.001
  
–ï–ö–û–ù–û–ú–Ü–Ø: 92% –∑–∞ —É—Å–ø—ñ—à–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π üéâ
```

**–û—Ü—ñ–Ω–∫–∞:** 9/10 ‚Äî —Å—É—Ç—Ç—î–≤–æ –¥–µ—à–µ–≤—à–µ

---

#### 4. **–õ–æ–≥—É–≤–∞–Ω–Ω—è (log_ai_call) - –í–∏—Å–æ–∫–∞ –æ—Ü—ñ–Ω–∫–∞**
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- ‚úÖ –ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ –≤–∏–¥–Ω–æ –≤—ñ–¥—Ä–∞–∑—É
- ‚úÖ –ú–æ–∂–Ω–∞ —Ç—Ä–µ–∫—É–≤–∞—Ç–∏ —É—Å–ø—ñ—Ö vs –ø–æ–º–∏–ª–∫–∏
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É

**–û—Ü—ñ–Ω–∫–∞:** 8/10 ‚Äî —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ, —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–æ

---

### ‚ö†Ô∏è **–ü–†–û–ë–õ–ï–ú–ò, –Ø–ö–Ü –ü–û–¢–†–Ü–ë–ù–û –†–û–ó–í'–Ø–ó–ê–¢–ò**

#### 1. **Gemini Rate Limiting (–ö–†–ò–¢–ò–ß–ù–û)**
```
–°—Ç–∞—Ç—É—Å: ‚ùå –ù–ï–í–ò–†–Ü–®–ï–ù–û
–ü—Ä–æ–±–ª–µ–º–∞: Gemini 2.0 Flash –º–∞–≤ –ª—ñ–º—ñ—Ç–∞—Ü—ñ—é 429 Too Many Requests
–ß–∞—Å –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—è: 2025-12-31 16:53:52

–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:
  1. –í–∏—á–µ—Ä–ø–∞–Ω–∞ –∫–≤–æ—Ç–∞ –∑–∞ –¥–µ–Ω—å/–≥–æ–¥–∏–Ω—É
  2. –ù–∞–¥—Ç–æ —á–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∏ (burst traffic)
  3. API –∫–ª—é—á –º–∞—î –Ω–∏–∂—á—ñ –ª—ñ–º—ñ—Ç–∏ (free tier?)
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä—ñ–≤–µ–Ω—å API –¥–æ—Å—Ç—É–ø—É —Ç–∞ –∫–≤–æ—Ç–∏ –≤ Google Cloud Console

---

#### 2. **–ù–µ—Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å Gemini –ø—Ä–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ**
```
–°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –ü–û–¢–†–ï–ë–£–Ñ –î–û–°–õ–Ü–î–ñ–ï–ù–ù–Ø
–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:
  - 1-–≥–æ –¥–Ω—è (22:29-22:51): 100% —É—Å–ø—ñ—Ö (8 –æ–ø–µ—Ä–∞—Ü—ñ–π)
  - 2-–≥–æ –¥–Ω—è (16:53): 0% —É—Å–ø—ñ—Ö (Gemini –ø–∞–¥–∞—î, OpenAI —Ä—è—Ç—É—î)

–ì—ñ–ø–æ—Ç–µ–∑–∞: Gemini –∫–≤–æ—Ç–∞ –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ–≤–Ω–æ–≥–æ –æ–±—Å—è–≥—É –∑–∞–ø–∏—Ç—ñ–≤
```

---

#### 3. **Fallback –Ω–∞ –º–µ–Ω—à –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä**
```
–°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –í–Ü–î–ù–û–°–ù–ê –ü–†–û–ë–õ–ï–ú–ê

–ö–æ–ª–∏ Gemini –ø–∞–¥–∞—î:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–º–æ –Ω–∞ OpenAI (gpt-4o-mini)
  - OpenAI –Ω–∞–±–∞–≥–∞—Ç–æ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏–π: 1.2-2.9 —Å–µ–∫ vs 0.9 —Å–µ–∫ (Gemini)
  - OpenAI –¥–æ—Ä–æ–∂—á–∏–π: $0.008-0.012 vs $0.0003-0.001 (Gemini)
  - –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞: –æ–ø–µ—Ä–∞—Ü—ñ—è –∑–∞–π–º–∞—î +150% —á–∞—Å—É, +1200% –≤–∞—Ä—Ç–æ—Å—Ç—ñ

–†–µ–∑—É–ª—å—Ç–∞—Ç: –°–∏—Å—Ç–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —Å—Ç—ñ–π–∫–æ—é, –∞–ª–µ –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—é –ø—Ä–∏ —Å–±–æ—è—Ö
```

---

## üõ†Ô∏è –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á –ü–û –û–ü–¢–ò–ú–Ü–ó–ê–¶–Ü–á

### **–ö–†–ò–¢–ò–ß–ù–Ü (—Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –Ω–µ–≥–∞–π–Ω–æ)**

#### 1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Gemini –∫–≤–æ—Ç–∏ —Ç–∞ –ª—ñ–º—ñ—Ç–∏**
```python
# –î—ñ—ó:
- –í—ñ–¥–∫—Ä–∏—Ç–∏ Google Cloud Console
- –ü–µ—Ä–µ–π—Ç–∏ –≤ Gemini API settings
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ quotas & rate limits
- –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ usage –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 24 –≥–æ–¥–∏–Ω–∏
- –ú–æ–∂–ª–∏–≤–æ, –ø–æ—Ç—Ä–µ–±—É—î—Ç—å—Å—è upgrade –¥–æ paid tier

# –û–∑–Ω–∞–∫–∏:
  if 429_errors_after_N_requests:
      print("–ô–º–æ–≤—ñ—Ä–Ω–æ, –≤–∏—á–µ—Ä–ø–∞–Ω–∞ –∫–≤–æ—Ç–∞")
      print("–†—ñ—à–µ–Ω–Ω—è: upgrade –ø–ª–∞–Ω –∞–±–æ —Ä–æ–∑–ø–æ–¥—ñ–ª–∏—Ç–∏ –∑–∞–ø–∏—Ç–∏ –≤ —á–∞—Å—ñ")
```

#### 2. **–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ exponential backoff –¥–ª—è Gemini**
```python
# –ü–æ—Ç–æ—á–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:
GEMINI_MAX_RETRIES = 2  # ‚Üê –∑–∞–º–∞–ª–æ
GEMINI_RETRY_WAIT = 1s   # ‚Üê –ª—ñ–Ω—ñ–π–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞

# –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ:
GEMINI_MAX_RETRIES = 4
GEMINI_RETRY_WAIT = exponential(base=2, max=16s)
  Attempt 1: 2s
  Attempt 2: 4s
  Attempt 3: 8s
  Attempt 4: 16s
```

#### 3. **–î–æ–¥–∞—Ç–∏ rate limiting –∑ –±–æ–∫—É –∫–ª—ñ—î–Ω—Ç–∞**
```python
# –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è:
class RateLimiter:
    def __init__(self, max_requests_per_minute=60):
        self.max_requests = max_requests_per_minute
        self.request_times = deque()
    
    async def wait_if_needed(self):
        """–ó–∞—Ç—Ä–∏–º–∞–π—Ç–µ, —è–∫—â–æ –Ω–∞–±–ª–∏–∂–∞—î–º–æ—Å—è –¥–æ –ª—ñ–º—ñ—Ç—É"""
        now = time.time()
        # –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä—ñ –∑–∞–ø–∏—Ç–∏
        while self.request_times and self.request_times[0] < now - 60:
            self.request_times.popleft()
        
        if len(self.request_times) >= self.max_requests:
            wait_time = 60 - (now - self.request_times[0])
            await asyncio.sleep(wait_time)
```

---

### **–í–ê–ñ–õ–ò–í–Ü (—Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ—Ç—è–≥–æ–º —Ç–∏–∂–Ω—è)**

#### 1. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ Gemini**
```env
# –ü–æ—Ç–æ—á–Ω—ñ:
GEMINI_MODEL=gemini-2.0-flash-exp
GEMINI_TEMPERATURE=0.7         # ‚Üê –º–æ–∂–Ω–∞ –∑–º–µ–Ω—à–∏—Ç–∏ –¥–ª—è –±—ñ–ª—å—à –¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
GEMINI_MAX_OUTPUT_TOKENS=None  # ‚Üê –∑–∞–¥–∞—Ç–∏ –ª—ñ–º—ñ—Ç?

# –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è tagging:
GEMINI_MODEL=gemini-2.0-flash-exp  # ‚úÖ –¥–æ–±—Ä–∏–π –≤–∏–±—ñ—Ä
GEMINI_TEMPERATURE=0.2              # ‚Üê –¥–ª—è JSON —Ç–∞gging –ø–æ—Ç—Ä–µ–±—É—î —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ
GEMINI_MAX_OUTPUT_TOKENS=200        # ‚Üê –¥–ª—è JSON –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –¥–æ—Å—Ç–∞—Ç–Ω—å–æ
```

#### 2. **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è prompt –¥–ª—è Gemini**
```python
# –†–æ–∑–º—ñ—Ä prompt —Å—É—Ç—Ç—î–≤–æ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ª—ñ–º—ñ—Ç–∏:
# –ü–æ—Ç–æ—á–Ω–∏–π prompt: 4465 tokens –∑–∞ tagging –æ–ø–µ—Ä–∞—Ü—ñ—é
# –¶–µ 90%+ –≤—ñ–¥ –ª—ñ–º—ñ—Ç—ñ–≤ –æ–¥–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É

# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:
1. –°–∫–æ—Ä–æ—Ç–∏—Ç–∏ prompt –∞–±–æ —Ä–æ–∑–¥—ñ–ª–∏—Ç–∏ –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏
2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥–∏ more efficiently
3. –î–æ–¥–∞—Ç–∏ caching –¥–ª—è –æ–¥–Ω–∞–∫–æ–≤–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
```

#### 3. **Implement request queuing/batching**
```python
# –ó–∞–º—ñ—Å—Ç—å –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤:
tasks = [tag_page(page) for page in pages]
results = await asyncio.gather(*tasks)  # ‚Üê –≤—Å–µ –æ–¥–Ω–æ—á–∞—Å–Ω–æ ‚Üí 429

# –ö—Ä–∞—â–µ: —á–µ—Ä–≥–∞ –∑ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É
async with asyncio.Semaphore(5):  # –º–∞–∫—Å 5 –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö
    results = await asyncio.gather(*tasks)
```

---

### **–¶–Ü–ö–ê–í–ò–• –î–õ–Ø –†–û–ó–ì–õ–Ø–î–£ (–Ω–∏–∑—å–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç)**

#### 1. **–í–∏–±—ñ—Ä –º—ñ–∂ Gemini –º–æ–¥–µ–ª—è–º–∏**
```
–ü–æ—Ç–æ—á–Ω–∞: gemini-2.0-flash-exp

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏:
  - gemini-1.5-flash:     –±—ñ–ª—å—à–µ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å, –º–µ–Ω—à–µ speed
  - gemini-2.0-flash:     —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—à–µ –∑–∞ exp –≤–µ—Ä—Å—ñ—é (–∫–æ–ª–∏ –≤–∏–π–¥–µ)
  - gemini-2.0-pro:       –±—ñ–ª—å—à–µ –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ, –≤–∏—â—ñ –ª—ñ–º—ñ—Ç–∏?

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è: –î–æ—á–µ–∫–∞—Ç–∏—Å—è gemini-2.0-flash (–±–µ–∑ -exp)
```

#### 2. **A/B —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤**
```python
# –ö–æ–ª–∏ Gemini —Å—Ç–∞–±—ñ–ª—å–Ω–∞:
  ~0.9 —Å–µ–∫ per operation
  $0.0003-0.001 per operation

# –ö–æ–ª–∏ Gemini –ø–∞–¥–∞—î ‚Üí OpenAI:
  ~2.5 —Å–µ–∫ per operation
  $0.012 per operation (4000% –¥–æ—Ä–æ–∂—á–µ)

–í–∏—Å–Ω–æ–≤–æ–∫: Gemini economically attractive, –∞–ª–µ –ø–æ—Ç—Ä–µ–±—É—î stability fixes
```

---

## üìà –ú–ï–¢–†–ò–ö–ò –£–°–ü–Ü–•–£ –ü–û–ö–†–ê–©–ï–ù–¨

### –©–æ –≤–¥–∞–ª–æ—Å—è —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ ‚úÖ

| –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å | –°—Ç–∞—Ç—É—Å | –û—Ü—ñ–Ω–∫–∞ |
|-----------------|--------|--------|
| AI Router (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è) | ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ | 9/10 |
| Fallback –º–µ—Ö–∞–Ω—ñ–∑–º | ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ | 8/10 |
| –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤–∏–∫–ª–∏–∫—ñ–≤ | ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ | 8/10 |
| Gemini —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è | ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ | 7/10 |
| –®–≤–∏–¥–∫—ñ—Å—Ç—å (Gemini) | ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ –Ω–∞ 35-45% | 8/10 |
| –í–∞—Ä—Ç—ñ—Å—Ç—å (–ø—Ä–∏ —É—Å–ø—ñ—Ö—É) | ‚úÖ –ï–∫–æ–Ω–æ–º—ñ—è 92% | 9/10 |
| –°—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å Gemini | ‚ùå –ü–æ—Ç—Ä–µ–±—É—î —Ä–æ–±–æ—Ç–∏ | 4/10 |
| –û–±—Ä–æ–±–∫–∞ 429 –ø–æ–º–∏–ª–æ–∫ | ‚ö†Ô∏è –ü—Ä–∞—Ü—é—î, –∞–ª–µ –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ | 6/10 |

---

## üéì –í–ò–°–ù–û–í–û–ö

### –û–±'—î–∫—Ç–∏–≤–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ –≤–ø–ª–∏–≤—É –ø–æ–∫—Ä–∞—â–µ–Ω—å: **7.5/10**

#### –ü–æ–∑–∏—Ç–∏–≤–Ω—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏:
- ‚úÖ **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó** –ø—Ä–∞—Ü—é—î –Ω–∞–¥—ñ–π–Ω–æ
- ‚úÖ **–®–≤–∏–¥–∫—ñ—Å—Ç—å** –∑–±—ñ–ª—å—à–µ–Ω–∞ –Ω–∞ 35-45% (–ø—Ä–∏ —É—Å–ø—ñ—Ö—É Gemini)
- ‚úÖ **–í–∞—Ä—Ç—ñ—Å—Ç—å** –∑–º–µ–Ω—à–µ–Ω–∞ –Ω–∞ 92% (–ø—Ä–∏ —É—Å–ø—ñ—Ö—É Gemini)
- ‚úÖ **–õ–æ–≥—É–≤–∞–Ω–Ω—è** –¥–µ—Ç–∞–ª—å–Ω–µ —Ç–∞ –∫–æ—Ä–∏—Å–Ω–µ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### –ù–µ–≥–∞—Ç–∏–≤–Ω—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏:
- ‚ùå **–°—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å Gemini** –Ω–∏–∑—å–∫–∞ ‚Äî –ø–∞–¥–∞—î –ø—Ä–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
- ‚ö†Ô∏è **Fallback –Ω–∞ OpenAI** –≥–∞—Ä–∞–Ω—Ç—É—î doability, –∞–ª–µ —Ä—ñ–∑–∫–æ –≥—ñ—Ä—à–∏–π –∑–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚ö†Ô∏è **Rate limiting** –ø–æ—Ç—Ä–µ–±—É—î —Ä—É—á–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫—É:
1. **–ù–µ–≥–∞–π–Ω–æ:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Gemini API –∫–≤–æ—Ç–∏, upgrade –Ω–∞ paid tier
2. **–¶–µ–π —Ç–∏–∂–¥–µ–Ω—å:** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ exponential backoff + client-side rate limiting
3. **–ù–∞—Å—Ç—É–ø–Ω–∏–π —Ç–∏–∂–¥–µ–Ω—å:** –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ prompt size, —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ batching

---

## üìã –¢–ê–ë–õ–ò–¶–Ø –ü–ê–†–ê–ú–ï–¢–†–Ü–í –î–õ–Ø –ó–ú–Ü–ù–ò

```env
# CR√çTICO –í–ò–†–Ü–®–ò–¢–ò
GEMINI_API_TIER=free            ‚Üí –ü–ï–†–ï–í–Ü–†–ò–¢–ò (–º–æ–∂–ª–∏–≤–æ, –ø–æ—Ç—Ä–µ–±—É—î—Ç—å—Å—è paid)
GEMINI_MAX_RETRIES=2            ‚Üí –ó–ë–Ü–õ–¨–®–ò–¢–ò –Ω–∞ 4
GEMINI_RETRY_BACKOFF=linear(1s) ‚Üí –ó–ú–Ü–ù–ò–¢–ò –Ω–∞ exponential(base=2, max=16s)

# –í–ê–ñ–õ–ò–í–û –ù–ê–õ–ê–®–¢–£–í–ê–¢–ò
GEMINI_TEMPERATURE=0.7          ‚Üí –ó–ú–ï–ù–®–ò–¢–ò –Ω–∞ 0.2  (–¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ JSON)
GEMINI_MAX_OUTPUT_TOKENS=null   ‚Üí –£–°–¢–ê–ù–û–í–ò–¢–ò 200
GEMINI_RATE_LIMIT=None          ‚Üí –î–û–î–ê–¢–ò —Å–µ–º–∞—Ñ–æ—Ä –∑ –º–∞–∫—Å 5 –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö

# –¶–Ü–ö–ê–í–û –†–û–ó–ì–õ–Ø–ù–£–¢–ò
GEMINI_MODEL=gemini-2.0-flash-exp ‚Üí –û–ù–û–í–ò–¢–ò –Ω–∞ gemini-2.0-flash (–∫–æ–ª–∏ —Å—Ç–∞–Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞)
FALLBACK_PROVIDER=openai        ‚Üí –ó–ê–õ–ò–®–ò–¢–ò —è–∫ —î (–≥–∞—Ä–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è)
```

---

**–ü—ñ–¥–ø–∏—Å–∞–Ω–æ:** AI Analytics Engine  
**–î–∞—Ç–∞:** 2026-01-03  
**–í–µ—Ä—Å—ñ—è –∑–≤—ñ—Ç—É:** 1.0
